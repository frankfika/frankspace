# 启动说明

你的项目支持**两种启动方式**：

---

## 方式 1：本地模式（无需数据库）⚡️

**适用场景：**
- 快速预览网站
- 开发前端界面
- 不需要管理后台功能
- 不想配置数据库

**配置：**

打开 `.env.local` 文件，确保 Supabase 配置被注释或留空：

```env
# 本地模式：注释掉或留空
# VITE_SUPABASE_URL=
# VITE_SUPABASE_ANON_KEY=
```

**启动：**

```bash
npm run dev
```

**访问：**
- 主网站：http://localhost:3000
- 数据来源：`constants.ts` 静态文件
- 管理后台：不可用（访问 /admin/login 无法登录）

**特点：**
✅ 立即启动，无需配置
✅ 网站所有功能正常
✅ 中英文切换正常
❌ 无法修改内容（需编辑 constants.ts）
❌ 管理后台不可用

---

## 方式 2：远程模式（连接 Supabase 数据库）🌐

**适用场景：**
- 需要管理后台功能
- 需要实时更新内容
- 准备部署到生产环境
- 需要图片上传功能

**配置步骤：**

### 1. 创建 Supabase 项目（5分钟）

访问 https://supabase.com 并：
- 注册账号
- 创建新项目：`frankfika-portfolio`
- 等待项目初始化完成

### 2. 获取凭证（1分钟）

在 Supabase 控制台：
- 点击 Settings → API
- 复制 **Project URL** 和 **anon/public key**

### 3. 配置环境变量（1分钟）

打开 `.env.local`，取消注释并填写真实值：

```env
# 远程模式：填写真实值
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 4. 运行数据库迁移（2分钟）

在 Supabase 控制台：
- 点击 SQL Editor → New query
- 复制 `supabase-migration.sql` 全部内容
- 粘贴并点击 Run

### 5. 创建管理员账号（1分钟）

在 Supabase 控制台：
- 点击 Authentication → Users
- Add user → Create new user
- 填写邮箱密码
- ✅ 勾选 "Auto Confirm User"
- 创建

### 6. 创建图片存储桶（可选，1分钟）

如果需要上传图片：
- 点击 Storage → New bucket
- 名称：`images`
- ✅ 勾选 "Public bucket"
- 创建

**启动：**

```bash
npm run dev
```

**访问：**
- 主网站：http://localhost:3000
- 管理后台登录：http://localhost:3000/admin/login
- 管理后台仪表盘：http://localhost:3000/admin

**特点：**
✅ 所有功能可用
✅ 实时更新内容
✅ 管理后台可用
✅ 支持图片上传
✅ 多人协作
✅ 数据持久化

---

## 如何切换模式

### 从本地模式 → 远程模式

1. 配置 `.env.local` 中的 Supabase 凭证
2. 重启开发服务器（Ctrl+C 然后 `npm run dev`）

### 从远程模式 → 本地模式

1. 注释掉 `.env.local` 中的 Supabase 配置
2. 重启开发服务器

---

## 验证当前模式

启动服务器后，检查浏览器控制台：

**本地模式：**
```
⚠️  Supabase not configured. Running in LOCAL MODE with constants.ts data.
```

**远程模式：**
无警告，或显示数据库连接成功

---

## 常见问题

### Q: 我应该用哪种模式？

**开发阶段：** 用本地模式快速开发
**准备上线：** 切换到远程模式

### Q: 本地模式下如何修改内容？

编辑 `constants.ts` 文件，保存后页面自动刷新

### Q: 远程模式启动失败？

检查：
1. `.env.local` 中的 URL 是否正确（必须以 https:// 开头）
2. anon key 是否完整
3. 重启开发服务器

### Q: 管理后台无法登录？

确保：
1. 使用远程模式（Supabase 已配置）
2. 已在 Supabase Auth 创建用户
3. 用户已确认（勾选 Auto Confirm）

---

## 推荐工作流程

1. **初期开发**：本地模式，快速迭代界面
2. **内容测试**：远程模式，测试管理后台
3. **准备部署**：远程模式，填充真实内容
4. **正式上线**：Vercel + Supabase 远程模式

---

## 快速命令

```bash
# 安装依赖
npm install

# 启动开发服务器（支持两种模式）
npm run dev

# 构建生产版本
npm run build

# 预览生产构建
npm run preview

# 分析打包大小
npm run analyze
```

---

需要帮助？查看 [ADMIN_SYSTEM_README.md](ADMIN_SYSTEM_README.md) 了解完整文档。
